/* ================= ROOT ================= */
:root {
  --bg: #020617;
  --card: #0f172a;
  --border: rgba(148,163,184,.35);
  --text: #e5e7eb;

  --green: #22c55e;
  --yellow: #eab308;
  --red: #ef4444;
}

/* ================= RESET ================= */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  background: radial-gradient(1200px 600px at top, #020b1f, #020617);
  color: var(--text);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  font-size: 14px;
}

/* ================= HEADER ================= */
.top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 16px;
  border-bottom: 1px solid var(--border);
  font-size: 13px;
  opacity: .9;
}

/* ================= LAYOUT ================= */
.main {
  padding: 12px;
}

/* ===== HÀNG TRÊN: 3 CỘT ===== */
.top-row {
  display: grid;
  grid-template-columns: 360px minmax(0, 1fr) 320px;
  gap: 12px;

  /* ⚠️ KHÔNG ĐƯỢC SET HEIGHT */
  align-items: stretch;

  /* nếu màn hình hẹp → cuộn ngang */
  overflow-x: auto;
}

/* tránh card bị bó nhỏ khi cuộn */
.top-row > .card {
  min-width: 300px;
}

/* ================= CARD ================= */
.card {
  background: linear-gradient(180deg, #0f172a, #020617);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;

  display: flex;
  flex-direction: column;
}

/* ép card trong top-row cao bằng nhau */
.top-row > .card {
  height: 100%;
}

/* ================= TITLE ================= */
.card h2 {
  margin: 0 0 6px;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: .2px;
}

/* ================= META ================= */
.meta {
  font-size: 12px;
  opacity: .8;
  margin-bottom: 6px;
}

/* ================= LINE ================= */
.line {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  white-space: nowrap;
}

.line span {
  overflow: hidden;
  text-overflow: ellipsis;
}

.line .date { flex: 1; }
.line .work { flex: 1.2; }
.line .status {
  flex: 0 0 auto;
  font-weight: 600;
}

/* ================= STATUS ================= */
.status.green { color: var(--green); }
.status.yellow { color: var(--yellow); }
.status.red { color: var(--red); }

/* nhấp nháy đỏ cấp 4 */
.status.blink {
  animation: blinkRed 1s infinite;
}

@keyframes blinkRed {
  0% { opacity: 1; }
  50% { opacity: .3; }
  100% { opacity: 1; }
}

/* ================= WARNING ================= */
.warning {
  font-size: 11px;
  color: var(--yellow);
  margin-top: 2px;
  white-space: nowrap;
}

/* ================= CHART ================= */
.chart-wrap {
  position: relative;
  flex: 1;
  min-height: 200px;
  max-height: 260px;
}

.chart-wrap canvas {
  width: 100% !important;
  height: 100% !important;
}

/* ================= SIDEBAR ================= */
.sidebar {
  display: flex;
  flex-direction: column;
  gap: 12px;
  height: 100%;
}

/* widget thường (cảnh báo) */
.sidebar-widget {
  display: flex;
  flex-direction: column;
}

/* widget kéo dài xuống theo cột */
.sidebar-widget--stretch {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* body bên trong sidebar → chỉ cuộn khi quá dài */
.sidebar-widget--stretch .widget-body,
.sidebar-widget .widget-body {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  padding-right: 4px;
}

/* ================= BOTTOM GRID (CÁC CĂN) ================= */
.unit-grid {
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 12px;
}

/* ================= FOOTER ================= */
.footer {
  text-align: center;
  font-size: 11px;
  opacity: .6;
  margin: 16px 0 6px;
}

/* ================= RESPONSIVE ================= */
@media (max-width: 1200px) {
  .top-row {
    grid-template-columns: 320px minmax(0, 1fr) 280px;
  }
}

@media (max-width: 900px) {
  .top-row {
    grid-template-columns: 1fr;
    overflow-x: hidden;
  }
}
